{% extends 'base.html' %}
<!--  -->
{% load static %}
<!--  -->
{% block content %}
<!--  -->

<!-- Content wrapper -->
<div class="content-wrapper">
	<!-- Content -->

	<div class="container-xxl flex-grow-1 container-p-y">
		<!-- Hoverable Table rows -->
		<div class="card">
			<h5 class="card-header">Your Current Properties</h5>
			<div class="table-responsive text-nowrap">
				<table class="table table-hover">
					<thead>
						<tr>
							<th>Property</th>
							<th>Domain</th>
							<th>Business</th>
							<th>Staff</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody class="table-border-bottom-0">
						{% for property in properties %}
						<tr>
							<td>
								<i class="fab fa-angular fa-lg text-danger me-3"></i>
								<strong
									><a href="{% url 'property_detail' property.id %}"
										>{{ property.name }}</a
									></strong
								>
							</td>
							<td>{{ property.domain }}</td>
							<td>{{ property.business }}</td>
							<td>
								{% if property.staff.all %}
								<ul
									class="list-unstyled users-list m-0 avatar-group d-flex align-items-center">
									{% for staff in property.staff.all %}
									<li
										data-bs-toggle="tooltip"
										data-popup="tooltip-custom"
										data-bs-placement="top"
										class="avatar avatar-xs pull-up"
										title="{{staff}}">
										<img
											src="{% static '/assets/img/avatars/' %}{{images|random}}.png"
											alt="Avatar"
											class="rounded-circle" />
									</li>

									{% endfor %}
								</ul>
								{% else %}
								<!--  -->
								None
								<!--  -->
								{% endif %}
							</td>

							<td>
								<div class="dropdown">
									<button
										type="button"
										class="btn p-0 dropdown-toggle hide-arrow"
										data-bs-toggle="dropdown">
										<i class="bx bx-dots-vertical-rounded"></i>
									</button>
									<div class="dropdown-menu">
										<a
											class="dropdown-item"
											href="{% url 'edit_property' property.id %}"
											><i class="bx bx-edit-alt me-1"></i> Edit</a
										>
										<a
											class="dropdown-item"
											href="{% url 'delete_property' property.id %}"
											><i class="bx bx-trash me-1"></i> Delete</a
										>
									</div>
								</div>
							</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
		<!--/ Hoverable Table rows -->
		<div class="my-5 d-flex justify-content-end">
			<a class="btn btn-secondary" href="{% url 'staff_register' %}">Add Staff</a>
			<a class="btn btn-primary mx-3" href="{% url 'property_register' %}"
				>Add New Property</a
			>
		</div>
	</div>
</div>

{% endblock %}
